<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>My Social Media App: Museical</title>
    <link rel="stylesheet" href="./stylesheets/style.css">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="279562630685-3hv4pg7a5vm45s9rpgph0e6vv07943pn.apps.googleusercontent.com">
  </head>
  <body>

    <h1 class="Magenta" > My Social Media App: Museical</h1>
<div class="qwerty">

    <form class="tyler" action="/authentification" method="post">
      <fieldset>
          <Legend class="roy"> Please Login:</Legend>
      <p>
        <label>Username:</label>
        <input type="text" name="username" id="usr_email" placeholder="Enter your username">
          </p><br><br>
          <p>
            <label>Password:</label>
          <input type="Password" name="mypassword" id="usr_password" placeholder="Enter your password">
          </p>
          <br>
          <% if (alert == 'username'){ %>
            <h4 class="alert">The username you have entered is not a registered account. Please try again, or click below to register</h4>
           <% } %>
           <% if (alert == 'password'){ %>
            <h4 class="alert">The password you have entered is incorrect. Please try again.</h4>
          <%  } %>
          <% if (alert == 'registered'){ %>
           <h4 class="alert">Thank you for creating an account, please log in.</h4>
         <%  } %>
         <% if (alert == 'log'){ %>
          <h4 class="alert">You must first be logged in to view this page.</h4>
        <%  } %>
        <% if (alert == 'changed'){ %>
         <h4 class="alert">Your password has been changed. Please log in with your new credentials.</h4>
       <%  } %>
       <% if (alert == 'accessDenied'){ %>
        <h4 class="alert">No access, for admin users only.</h4>
      <%  } %>
          <br>
          <button >Login</button>

      </fieldset>
    </form>
</div >

  <div class="rat">
    <a href="/register"> If not registered click here</a>
    <br> <br>
    <a href="/passwordReset"> Forgot Password? </a>
  </div>
  <br><br>
<form class="tyler" action="/Google-authenticate" method="post">
    <div class="g-signin2" data-onsuccess="onSignIn">
<button> Click here</button>
    </div>
<br><br>
<a href="#" onclick="signOut();">Sign out</a>


  </form>

  <script>
  function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();
  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
}
function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
    });
  }
  if (auth2.isSignedIn.get()) {
    var profile = auth2.currentUser.get().getBasicProfile();
    console.log('ID: ' + profile.getId());
    console.log('Full Name: ' + profile.getName());
    console.log('Given Name: ' + profile.getGivenName());
    console.log('Family Name: ' + profile.getFamilyName());
    console.log('Image URL: ' + profile.getImageUrl());
    console.log('Email: ' + profile.getEmail());
  }
  gapi.load('auth2', function() {
  auth2 = gapi.auth2.init({
    client_id: 'CLIENT_ID.apps.googleusercontent.com',
    fetch_basic_profile: false,
    scope: 'profile'
  });

  // Sign the user in, and then retrieve their ID.
  auth2.signIn().then(function() {
    console.log(auth2.currentUser.get().getId());
  });
});



  </script>

<footer class="bottom" style="text-align: center;"> <h3>&copy; Copyright 2020, Example Corporation</h3> </footer>

    </body<>
    </html>
